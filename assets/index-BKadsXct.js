import{_ as D}from"./NewProjectList-Bj_HbV_n.js";import{_ as T,l as h,i as _,o as a,e as p,a as t,w as e,F as y,y as A,x as V,ax as U,p as i,z as r,ay as Z,Z as q,U as H,az as M,c as m,s as k,j as n,v as j,a0 as w,a1 as P,a2 as b,n as d,k as L,u as C,H as g,m as N,q as G}from"./index-CWnjofDw.js";import{a as I,_ as B}from"./Comment-Al-8fur8.js";import{P as E}from"./ProjectRunner-CsK9-CUe.js";import{V as J}from"./VContainer-1zfpYcGM.js";import"./VForm-Ctpkudny.js";import"./VTextarea-HWp3PnOm.js";import"./VExpansionPanels-DdKEecrl.js";const K={components:{NewProjectList:D},name:"addtolist",data(){return{localuser:h,userinfo:h.user,NewProjectListDialog:!1,lists:[]}},methods:{async getProjectList(){this.lists=(await _({url:"/projectlist/check?projectid="+this.$route.params.id,data:{userid:this.userinfo.id,projectid:this.$route.params.id},method:"get"})).data},async ProjectlistAdd(u){await _({url:"/projectlist/add",data:{userid:this.userinfo.id,projectid:this.$route.params.id,listid:u},method:"post"}).then(s=>{this.$toast.add({severity:"info",summary:"info",detail:s.message,life:3e3}),this.getProjectList()})},async ProjectlistDelete(u){await _({url:"/projectlist/delete",data:{userid:this.userinfo.id,projectid:this.$route.params.id,listid:u},method:"post"}).then(s=>{this.$toast.add({severity:"info",summary:"info",detail:s.message,life:3e3}),this.getProjectList()})}},mounted(){this.getProjectList()}};function O(u,s,S,z,o,c){const f=D;return a(),p(y,null,[t(q,null,{default:e(()=>[(a(!0),p(y,null,A(o.lists,l=>(a(),p("div",{key:l.id},[t(V,{"append-icon":l.include==!0?"mdi-minus-circle":"mdi-plus-circle",active:l.include==!0,color:"primary",onClick:v=>l.include==!0?c.ProjectlistDelete(l.id):c.ProjectlistAdd(l.id)},{default:e(()=>[t(U,null,{default:e(()=>[i(r(l.title),1)]),_:2},1024),t(Z,null,{default:e(()=>[i(r(l.description),1)]),_:2},1024)]),_:2},1032,["append-icon","active","onClick"])]))),128)),t(V,{onClick:s[0]||(s[0]=l=>o.NewProjectListDialog=!0)},{default:e(()=>s[2]||(s[2]=[i("新建列表")])),_:1})]),_:1}),t(H,{modelValue:o.NewProjectListDialog,"onUpdate:modelValue":s[1]||(s[1]=l=>o.NewProjectListDialog=l)},{default:e(()=>[t(f,{listid:u.editlistid,close:()=>o.NewProjectListDialog=!1,callback:c.getProjectList},null,8,["listid","close","callback"])]),_:1},8,["modelValue"])],64)}const R=T(K,[["render",O]]),Q={components:{ProjectRunner:E,TimeAgo:I,Comment:B,AddTolist:R},data(){return{project:{id:1,authorid:1,time:"2000-01-01T00:00:00.000Z",view_count:0,like_count:0,type:"text",favo_count:0,title:"加载中",state:"public",description:"加载中",license:"MIT",tags:"",likeid:"",favoid:"",author:{id:1,display_name:"加载中",images:"加载中"}},openEditor:M,localuser:h}},async created(){await this.getproject()},methods:{async getproject(){this.project=await _({url:"/project/"+this.$route.params.id,method:"get"}),console.log(this.project)}}},W={class:"px-4 d-flex ga-2 mb-2"},X={class:"px-4 d-flex ga-2 mb-2"},Y={class:"px-4 d-flex ga-2 mb-2"},$={class:"px-4 d-flex ga-2 mb-2"},tt={class:"px-4 d-flex ga-2 mb-2"},et={class:"px-4"};function ot(u,s,S,z,o,c){const f=E,l=B,v=I,F=R;return a(),m(J,null,{default:e(()=>[t(G,null,{default:e(()=>[t(k,{cols:"8",md:"8",lg:"8",xl:"8",sm:"8",xs:"8"},{default:e(()=>[t(f,{type:o.project.type,id:o.project.id},null,8,["type","id"]),s[1]||(s[1]=n("br",null,null,-1)),t(l,{url:"project-"+u.$route.params.id,name:"项目"},null,8,["url"])]),_:1}),t(k,{cols:"4"},{default:e(()=>[t(j,{hover:"",border:""},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[i(r(o.project.title),1)]),_:1}),t(b,null,{default:e(()=>[i(r(o.project.description),1)]),_:1})]),_:1}),n("div",W,[t(d,{pill:""},{default:e(()=>[t(L,{start:""},{default:e(()=>[t(C,{src:"https://s4-1.wuyuan.1r.ink/user/"+o.project.author.images},null,8,["src"])]),_:1}),i(r(o.project.author.display_name),1)]),_:1})]),n("div",X,[t(d,{pill:"","prepend-icon":"mdi-eye"},{default:e(()=>[i(r(o.project.view_count)+"浏览",1)]),_:1}),t(d,{pill:"","prepend-icon":"mdi-clock"},{default:e(()=>[t(v,{date:o.project.time},null,8,["date"])]),_:1})]),n("div",Y,[o.project.state=="public"?(a(),m(d,{key:0,pill:"","prepend-icon":"mdi-xml"},{default:e(()=>s[2]||(s[2]=[i("开源作品")])),_:1})):g("",!0),o.project.state=="private"?(a(),m(d,{key:1,pill:"","prepend-icon":"mdi-xml"},{default:e(()=>s[3]||(s[3]=[i("私密作品")])),_:1})):g("",!0),t(d,{pill:"","prepend-icon":"mdi-application"},{default:e(()=>[i(r(o.project.type),1)]),_:1})]),n("div",$,[(a(!0),p(y,null,A(o.project.tags.split(","),x=>(a(),p("div",null,[t(d,null,{default:e(()=>[i(r(x),1)]),_:2},1024)]))),256))]),n("div",tt,[t(N,{onClick:s[0]||(s[0]=x=>o.openEditor(o.project.id,o.project.type)),variant:"text"},{default:e(()=>s[4]||(s[4]=[i("打开创造页")])),_:1}),o.project.authorid!=o.localuser.user.id?(a(),m(N,{key:0,to:"/projects/"+o.project.id+"/fork",variant:"text"},{default:e(()=>s[5]||(s[5]=[i("改编")])),_:1},8,["to"])):g("",!0)]),n("div",et,[t(j,{hover:"",to:"/user/"+o.project.authorid,border:""},{default:e(()=>[t(w,null,{prepend:e(()=>[t(L,null,{default:e(()=>[t(C,{alt:o.project.author.display_name,src:"https://s4-1.wuyuan.1r.ink/user/"+o.project.author.images},null,8,["alt","src"])]),_:1})]),default:e(()=>[t(P,{class:"text-white"},{default:e(()=>[i(r(o.project.author.display_name),1)]),_:1}),t(b,{class:"text-white"},{default:e(()=>[i(r(o.project.author.motto),1)]),_:1})]),_:1})]),_:1},8,["to"])]),s[6]||(s[6]=n("br",null,null,-1))]),_:1}),s[7]||(s[7]=n("br",null,null,-1)),t(j,{hover:"",border:""},{default:e(()=>[t(F)]),_:1})]),_:1})]),_:1})]),_:1})}const pt=T(Q,[["render",ot]]);export{pt as default};
